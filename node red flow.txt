weather


[{"id":"8b7809d5.107f88","type":"tab","label":"smart climate monitoring","disabled":false,"info":""},{"id":"6fe454f6.58968c","type":"inject","z":"8b7809d5.107f88","name":"","topic":"","payload":"{\"name\":\"dp\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":140,"wires":[["6041489e.5ca548"]]},{"id":"6041489e.5ca548","type":"debug","z":"8b7809d5.107f88","name":"inject node o/p","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":440,"y":140,"wires":[]},{"id":"524e2190.cc6d2","type":"ibmiot in","z":"8b7809d5.107f88","authentication":"apiKey","apiKey":"ed08da50.218e08","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"5555","applicationId":"","deviceType":"nodemcu555","eventType":"+","commandType":"","format":"json","name":"IBM IoT","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":"","allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":180,"y":280,"wires":[["c18b3c6e.45e01","dad9e1f0.4c34a","e4ab390.04d05c8"]]},{"id":"c18b3c6e.45e01","type":"debug","z":"8b7809d5.107f88","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":470,"y":280,"wires":[]},{"id":"dad9e1f0.4c34a","type":"function","z":"8b7809d5.107f88","name":"humidity passing","func":"global.set(\"H\",msg.payload.d.humidity)\nmsg.payload=msg.payload.d.humidity\nreturn msg;","outputs":1,"noerr":0,"x":399,"y":563,"wires":[["3c98c040.786da","9e1d8697.643338"]]},{"id":"3c98c040.786da","type":"debug","z":"8b7809d5.107f88","name":"humidity value","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":693,"y":584,"wires":[]},{"id":"e4ab390.04d05c8","type":"function","z":"8b7809d5.107f88","name":"temperature passing","func":"global.set(\"T\",msg.payload.d.temperature)\nmsg.payload=msg.payload.d.temperature\nreturn msg;","outputs":1,"noerr":0,"x":429,"y":343,"wires":[["dc41bb5a.aba568","cd16449d.bfa858"]]},{"id":"dc41bb5a.aba568","type":"debug","z":"8b7809d5.107f88","name":"temperature value","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":748,"y":347,"wires":[]},{"id":"9e1d8697.643338","type":"ui_gauge","z":"8b7809d5.107f88","name":"","group":"3e35a134.0c25ce","order":0,"width":0,"height":0,"gtype":"gage","title":"humidity","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#ff0000","#e6e600","#ca3838"],"seg1":"","seg2":"","x":703,"y":482,"wires":[]},{"id":"cd16449d.bfa858","type":"ui_gauge","z":"8b7809d5.107f88","name":"","group":"8870ccb2.1113e","order":0,"width":0,"height":0,"gtype":"gage","title":"temperature","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#80ff00","#e6e600","#ca3838"],"seg1":"","seg2":"","x":790,"y":401,"wires":[]},{"id":"b30c2665.0651e8","type":"http in","z":"8b7809d5.107f88","name":"climate request","url":"/climatedata","method":"get","upload":false,"swaggerDoc":"","x":153,"y":682,"wires":[["aa529c8c.7fa04"]]},{"id":"9f0cd836.0536f8","type":"http response","z":"8b7809d5.107f88","name":"climate response","statusCode":"","headers":{},"x":754,"y":680,"wires":[]},{"id":"aa529c8c.7fa04","type":"function","z":"8b7809d5.107f88","name":"climateresponse_function","func":"msg.payload={\"temperature\":global.get(\"T\"),\"humidity\":global.get(\"H\")}\nreturn msg;","outputs":1,"noerr":0,"x":475.5,"y":679,"wires":[["9f0cd836.0536f8"]]},{"id":"735ac41f.4c1a8c","type":"watson-conversation-v1","z":"8b7809d5.107f88","name":"","workspaceid":"90b79162-d922-4e2e-9ca9-fdbee0a263c3","multiuser":false,"context":true,"empty-payload":false,"default-endpoint":false,"service-endpoint":"https://gateway-lon.watsonplatform.net/assistant/api","timeout":"","optout-learning":false,"x":241,"y":854,"wires":[["7103712f.946ac"]]},{"id":"7629c35c.37a38c","type":"inject","z":"8b7809d5.107f88","name":"","topic":"","payload":"what about climatic conditions","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":129,"y":780,"wires":[["735ac41f.4c1a8c"]]},{"id":"814e9d8e.8cb0b","type":"debug","z":"8b7809d5.107f88","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":718,"y":783,"wires":[]},{"id":"7103712f.946ac","type":"function","z":"8b7809d5.107f88","name":"json parsing for bot responce","func":"msg.payload=msg.payload.output.text[0]\nreturn msg;","outputs":1,"noerr":0,"x":434,"y":766,"wires":[["814e9d8e.8cb0b","131a7343.a9d32d"]]},{"id":"131a7343.a9d32d","type":"switch","z":"8b7809d5.107f88","name":"bot response switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"temperature","vt":"str"},{"t":"eq","v":"humidity","vt":"str"},{"t":"eq","v":"climate","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":329,"y":907,"wires":[["2e075a63.804a56"],["78001f91.e452b"],["ec210249.9e177"],["54f47a29.4c1474","f58682cf.ee932"]]},{"id":"2e075a63.804a56","type":"function","z":"8b7809d5.107f88","name":"at switch temperature","func":"msg.payload=\"today's temperature is \" + global.get(\"T\")\nreturn msg;","outputs":1,"noerr":0,"x":597,"y":844,"wires":[["54f47a29.4c1474","f58682cf.ee932"]]},{"id":"78001f91.e452b","type":"function","z":"8b7809d5.107f88","name":"at switch humidity","func":"msg.payload=\"today's humidity is \" + global.get(\"H\")\nreturn msg;","outputs":1,"noerr":0,"x":579,"y":882,"wires":[["54f47a29.4c1474","f58682cf.ee932"]]},{"id":"ec210249.9e177","type":"function","z":"8b7809d5.107f88","name":"at switch climate","func":"msg.payload=\"today's temperature and humidity are \" + global.get(\"T\")+\",\" +global.get(\"H\")\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":923,"wires":[["54f47a29.4c1474","f58682cf.ee932"]]},{"id":"54f47a29.4c1474","type":"debug","z":"8b7809d5.107f88","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":709.5,"y":1012,"wires":[]},{"id":"9e06c734.c9ce18","type":"ui_form","z":"8b7809d5.107f88","name":"","label":"","group":"599b1cce.4a0694","order":1,"width":0,"height":0,"options":[{"label":"user input","value":"user_input","type":"text","required":true}],"formValue":{"user_input":""},"payload":"","submit":"submit","cancel":"cancel","topic":"","x":132,"y":1027,"wires":[["253616df.65b6ca"]]},{"id":"7cb10c9d.6e7804","type":"debug","z":"8b7809d5.107f88","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":394,"y":1034,"wires":[]},{"id":"db27e950.f99748","type":"ui_text","z":"8b7809d5.107f88","group":"599b1cce.4a0694","order":2,"width":0,"height":0,"name":"","label":"user question:","format":"{{msg.payload}}","layout":"row-left","x":539,"y":1120,"wires":[]},{"id":"253616df.65b6ca","type":"function","z":"8b7809d5.107f88","name":"form output for json format","func":"msg.payload=msg.payload.user_input\nreturn msg;","outputs":1,"noerr":0,"x":243,"y":1142,"wires":[["db27e950.f99748","7cb10c9d.6e7804","735ac41f.4c1a8c"]]},{"id":"f58682cf.ee932","type":"ui_text","z":"8b7809d5.107f88","group":"599b1cce.4a0694","order":3,"width":0,"height":0,"name":"","label":"bot output","format":"{{msg.payload}}","layout":"row-left","x":712,"y":1201,"wires":[]},{"id":"ed08da50.218e08","type":"ibmiot","z":"","name":"","keepalive":"60","serverName":"ti62vq.messaging.internetofthings.ibmcloud.com","cleansession":true,"appId":"","shared":false},{"id":"3e35a134.0c25ce","type":"ui_group","z":"","name":"humidity","tab":"7badddb2.9d9d74","disp":true,"width":"6","collapse":false},{"id":"8870ccb2.1113e","type":"ui_group","z":"","name":"temperature","tab":"7badddb2.9d9d74","disp":true,"width":"6","collapse":false},{"id":"599b1cce.4a0694","type":"ui_group","z":"","name":"Default","tab":"b624dd9b.4cc1d","disp":false,"width":"15","collapse":false},{"id":"7badddb2.9d9d74","type":"ui_tab","z":"","name":"mlritm climate monitoring","icon":"dashboard","disabled":false,"hidden":false},{"id":"b624dd9b.4cc1d","type":"ui_tab","z":"","name":"climate chatbot","icon":"dashboard","disabled":false,"hidden":false}]





led light


[{"id":"ac7a7a53.adace8","type":"tab","label":"Smart home automation","disabled":false,"info":""},{"id":"51887afa.7e8f04","type":"ui_button","z":"ac7a7a53.adace8","name":"","group":"606c4d7b.6618c4","order":0,"width":0,"height":0,"passthru":false,"label":"lightON button","tooltip":"","color":"","bgcolor":"","icon":"","payload":"light_ON","payloadType":"str","topic":"","x":217,"y":166,"wires":[["9d11e2e3.e7e69","5f0a1ec2.735fd"]]},{"id":"5a002e4a.481fc","type":"ui_button","z":"ac7a7a53.adace8","name":"","group":"606c4d7b.6618c4","order":0,"width":0,"height":0,"passthru":false,"label":"light_OFF button","tooltip":"","color":"","bgcolor":"","icon":"","payload":"light_OFF","payloadType":"str","topic":"","x":246,"y":278,"wires":[["9d11e2e3.e7e69","5f0a1ec2.735fd"]]},{"id":"9d11e2e3.e7e69","type":"debug","z":"ac7a7a53.adace8","name":"button output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":546.5,"y":176,"wires":[]},{"id":"5f0a1ec2.735fd","type":"ibmiot out","z":"ac7a7a53.adace8","authentication":"apiKey","apiKey":"ed08da50.218e08","outputType":"cmd","deviceId":"5555","deviceType":"nodemcu555","eventCommandType":"home","format":"String","data":"ok","qos":0,"name":"IBM IoT","service":"registered","x":532,"y":282,"wires":[]},{"id":"e26b699.1a8d998","type":"http in","z":"ac7a7a53.adace8","name":"","url":"/home","method":"get","upload":false,"swaggerDoc":"","x":71,"y":439,"wires":[["a6028159.d5041"]]},{"id":"8820d539.843858","type":"http response","z":"ac7a7a53.adace8","name":"","statusCode":"","headers":{},"x":679,"y":434,"wires":[]},{"id":"1f662281.ab31ad","type":"debug","z":"ac7a7a53.adace8","name":"http request output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":666,"y":524,"wires":[]},{"id":"a6028159.d5041","type":"function","z":"ac7a7a53.adace8","name":"http response after json parsing","func":"msg.payload=msg.payload.command\nreturn msg;","outputs":1,"noerr":0,"x":355,"y":437,"wires":[["8820d539.843858","1f662281.ab31ad","5f0a1ec2.735fd"]]},{"id":"606c4d7b.6618c4","type":"ui_group","z":"","name":"kitchen","tab":"e614651f.d2b208","disp":true,"width":"6","collapse":false},{"id":"ed08da50.218e08","type":"ibmiot","z":"","name":"","keepalive":"60","serverName":"ti62vq.messaging.internetofthings.ibmcloud.com","cleansession":true,"appId":"","shared":false},{"id":"e614651f.d2b208","type":"ui_tab","z":"","name":"Home automation","icon":"dashboard","disabled":false,"hidden":false}]